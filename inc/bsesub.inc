;/*!
;   @file
;
;   @ingroup fapi
;
;   @brief Family API implementation
;
;   (c) osFree Project 2018-2022, <http://www.osFree.org>
;   for licence see licence.txt in root directory, or project website
;
;   This is Family API implementation for DOS, used with BIND tools
;   to link required API
;
;   @author Yuri Prokushev (yuri.prokushev@gmail.com)
;
;*/

		INCLUDE	mac.inc

IFDEF INCL_SUB
	INCL_KBD	EQU	1
	INCL_VIO	EQU	1
;	INCL_AVIO	EQU	1
	INCL_MOU	EQU	1
ENDIF

IFDEF	INCL_MOU

MR_MOUGETNUMBUTTONS	EQU	00000001H
MR_MOUGETNUMMICKEYS	EQU	00000002H
MR_MOUGETDEVSTATUS	EQU	00000004H
MR_MOUGETNUMQUEEL	EQU	00000008H
MR_MOUREADEVENTQUE	EQU	00000010H
MR_MOUGETSCALEFACT	EQU	00000020H
MR_MOUGETEVENTMASK	EQU	00000040H
MR_MOUSETSCALEFACT	EQU	00000080H
MR_MOUSETEVENTMASK	EQU	00000100H
MR_MOUGETHOTKEY		EQU	00000200H
MR_MOUSETHOTKEY		EQU	00000400H
MR_MOUOPEN		EQU	00000800H
MR_MOUCLOSE		EQU	00001000H
MR_MOUGETPTRSHAPE	EQU	00002000H
MR_MOUSETPTRSHAPE	EQU	00004000H
MR_MOUDRAWPTR		EQU	00008000H

MR_MOUREMOVEPTR		EQU	00010000H
MR_MOUGETPTRPOS		EQU	00020000H
MR_MOUSETPTRPOS		EQU	00040000H
MR_MOUINITREAL		EQU	00080000H
MR_MOUFLUSHQUE		EQU	00100000H
MR_MOUSETDEVSTATUS	EQU	00200000H

FC_MOUGETNUMBUTTONS	EQU	00H
FC_MOUGETNUMMICKEYS	EQU	01H
FC_MOUGETDEVSTATUS	EQU	02H
FC_MOUGETNUMQUEEL	EQU	03H
FC_MOUREADEVENTQUE	EQU	04H
FC_MOUGETSCALEFACT	EQU	05H
FC_MOUGETEVENTMASK	EQU	06H
FC_MOUSETSCALEFACT	EQU	07H
FC_MOUSETEVENTMASK	EQU	08H
FC_MOUGETHOTKEY		EQU	09H
FC_MOUSETHOTKEY		EQU	0AH
FC_MOUOPEN		EQU	0BH
FC_MOUCLOSE		EQU	0CH
FC_MOUGETPTRSHAPE	EQU	0DH
FC_MOUSETPTRSHAPE	EQU	0EH
FC_MOUDRAWPTR		EQU	0FH
FC_MOUREMOVEPTR		EQU	10H
FC_MOUGETPTRPOS		EQU	11H
FC_MOUSETPTRPOS		EQU	12H
FC_MOUINITREAL		EQU	13H
FC_MOUFLUSHQUE		EQU	14H
FC_MOUSETDEVSTATUS	EQU	15H

@MouShellInit	MACRO
		@DEFINE	MOUSHELLINIT
		CALL	FAR PTR MOUSHELLINIT
		ENDM

@MouFree	MACRO
		@DEFINE	MOUFREE
		CALL	FAR PTR MOUFREE
		ENDM

@MouRegister	MACRO   MODULE,ENTRY,MASK
		@DEFINE  MOUREGISTER
		@PUSHS   MODULE
		@PUSHS   ENTRY
		@PUSHD   MASK
		CALL    FAR PTR MOUREGISTER
		ENDM

@MouDeRegister	MACRO
		@DEFINE  MOUDEREGISTER
		CALL    FAR PTR MOUDEREGISTER
		ENDM

@MouFlushQue	MACRO   DEVICEHANDLE
		@DEFINE MOUFLUSHQUE
		@PUSHW  DEVICEHANDLE
		CALL    FAR PTR MOUFLUSHQUE
		ENDM

@MouGetPtrPos	MACRO   POS,HANDLE
		@DEFINE  MOUGETPTRPOS
		@PUSHS   POS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETPTRPOS
		ENDM

@MouSetPtrPos	MACRO   POS,HANDLE
		@DEFINE  MOUSETPTRPOS
		@PUSHS   POS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUSETPTRPOS
		ENDM

@MouSetPtrShape	MACRO   PBUFF,PDEF,HANDLE
		@DEFINE  MOUSETPTRSHAPE
		@PUSHS   PBUFF
		@PUSHS   PDEF
		@PUSHW   HANDLE
		CALL    FAR PTR MOUSETPTRSHAPE
		ENDM

@MouGetPtrShape	MACRO   PBUFF,PDEF,HANDLE
		@DEFINE  MOUGETPTRSHAPE
		@PUSHS   PBUFF
		@PUSHS   PDEF
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETPTRSHAPE
		ENDM

@MouGetDevStatus	MACRO   STATUS,HANDLE
		@DEFINE  MOUGETDEVSTATUS
		@PUSHS   STATUS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETDEVSTATUS
		ENDM

@MouGetNumButtons	MACRO   BUTTONS,HANDLE
		@DEFINE  MOUGETNUMBUTTONS
		@PUSHS   BUTTONS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETNUMBUTTONS
		ENDM

@MouGetNumMickeys	MACRO   MICKEYS,HANDLE
		@DEFINE  MOUGETNUMMICKEYS
		@PUSHS   MICKEYS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETNUMMICKEYS
		ENDM

@MouReadEventQue	MACRO   BUFFER,TYPE,HANDLE
		@DEFINE  MOUREADEVENTQUE
		@PUSHS   BUFFER
		@PUSHS   TYPE
		@PUSHW   HANDLE
		CALL    FAR PTR MOUREADEVENTQUE
		ENDM

@MouGetNumQueEl	MACRO   QDATA,HANDLE
		@DEFINE  MOUGETNUMQUEEL
		@PUSHS   QDATA
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETNUMQUEEL
		ENDM

@MouGetEventMask	MACRO   MASK,HANDLE
		@DEFINE  MOUGETEVENTMASK
		@PUSHS   MASK
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETEVENTMASK
		ENDM

@MouSetEventMask	MACRO   MASK,HANDLE
		@DEFINE  MOUSETEVENTMASK
		@PUSHS   MASK
		@PUSHW   HANDLE
		CALL    FAR PTR MOUSETEVENTMASK
		ENDM

@MouGetScaleFact	MACRO   SCALE,HANDLE
		@DEFINE  MOUGETSCALEFACT
		@PUSHS   SCALE
		@PUSHW   HANDLE
		CALL    FAR PTR MOUGETSCALEFACT
		ENDM

@MouSetScaleFact	MACRO   SCALE,HANDLE
		@DEFINE  MOUSETSCALEFACT
		@PUSHS   SCALE
		@PUSHW   HANDLE
		CALL    FAR PTR MOUSETSCALEFACT
		ENDM

@MouOpen	MACRO   DNAME,HANDLE
		LOCAL    @PADDRS,@PHANDLE
		@DEFINE  MOUOPEN
		MOV      AX,WORD PTR [DNAME]
		OR       AX,WORD PTR [DNAME]+2
		JNZ      @PADDRS
		PUSH     AX
		PUSH     AX
		JMP      SHORT @PHANDLE
@paddrs:	@PUSHS   DNAME
@phandle:	@PUSHS   HANDLE
		CALL    FAR PTR MOUOPEN
		ENDM

@MouClose	MACRO   HANDLE
		@DEFINE  MOUCLOSE
		@PUSHW   HANDLE
		CALL    FAR PTR MOUCLOSE
		ENDM

@MouRemovePtr	MACRO   AREA,HANDLE
		@DEFINE  MOUREMOVEPTR
		@PUSHS   AREA
		@PUSHW   HANDLE
		CALL    FAR PTR MOUREMOVEPTR
		ENDM

@MouDrawPtr	MACRO   HANDLE
		@DEFINE  MOUDRAWPTR
		@PUSHW   HANDLE
		CALL    FAR PTR MOUDRAWPTR
		ENDM

@MouSetDevStatus	MACRO   STATUS,HANDLE
		@DEFINE  MOUSETDEVSTATUS
		@PUSHS   STATUS
		@PUSHW   HANDLE
		CALL    FAR PTR MOUSETDEVSTATUS
		ENDM

@MouInitReal	MACRO   DNAME
		@DEFINE  MOUINITREAL
		@PUSHS   DNAME
		CALL    FAR PTR MOUINITREAL
		ENDM

@MouSynch	MACRO    IOWAIT
		@DEFINE  MOUSYNCH
		@PUSHW   IOWAIT
		CALL     FAR PTR MOUSYNCH
		ENDM

ENDIF

IFDEF	INCL_VIO
VR_VIOGETCURPOS		EQU	000000001H
VR_VIOGETCURTYPE	EQU	000000002H
VR_VIOGETMODE		EQU	000000004H
VR_VIOGETBUF		EQU	000000008H
VR_VIOGETPHYSBUF	EQU	000000010H
VR_VIOSETCURPOS		EQU	000000020H
VR_VIOSETCURTYPE	EQU	000000040H
VR_VIOSETMODE		EQU	000000080H
VR_VIOSHOWBUF		EQU	000000100H
VR_VIOREADCHARSTR	EQU	000000200H
VR_VIOREADCELLSTR	EQU	000000400H
VR_VIOWRTNCHAR		EQU	000000800H
VR_VIOWRTNATTR		EQU	000001000H
VR_VIOWRTNCELL		EQU	000002000H
VR_VIOWRTTTY		EQU	000004000H
VR_VIOWRTCHARSTR	EQU	000008000H

VR_VIOWRTCHARSTRATT	EQU	000010000H
VR_VIOWRTCELLSTR	EQU	000020000H
VR_VIOSCROLLUP		EQU	000040000H
VR_VIOSCROLLDN		EQU	000080000H
VR_VIOSCROLLLF		EQU	000100000H
VR_VIOSCROLLRT		EQU	000200000H
VR_VIOSETANSI		EQU	000400000H
VR_VIOGETANSI		EQU	000800000H
VR_VIOPRTSC		EQU	001000000H
VR_VIOSCRLOCK		EQU	002000000H
VR_VIOSCRUNLOCK		EQU	004000000H
VR_VIOSAVREDRAWWAIT	EQU	008000000H
VR_VIOSAVREDRAWUNDO	EQU	010000000H
VR_VIOPOPUP		EQU	020000000H
VR_VIOENDPOPUP		EQU	040000000H
VR_VIOPRTSCTOGGLE	EQU	080000000H

VR_VIOMODEWAIT		EQU	000000001H
VR_VIOMODEUNDO		EQU	000000002H
VR_VIOGETFONT		EQU	000000004H
VR_VIOGETCONFIG		EQU	000000008H
VR_VIOSETCP		EQU	000000010H
VR_VIOGETCP		EQU	000000020H
VR_VIOSETFONT		EQU	000000040H
VR_VIOGETSTATE		EQU	000000080H
VR_VIOSETSTATE		EQU	000000100H

FC_VIOGETPHYSBUF	EQU	0
FC_VIOGETBUF		EQU	1
FC_VIOSHOWBUF		EQU	2
FC_VIOGETCURPOS		EQU	3
FC_VIOGETCURTYPE	EQU	4
FC_VIOGETMODE		EQU	5
FC_VIOSETCURPOS		EQU	6
FC_VIOSETCURTYPE	EQU	7
FC_VIOSETMODE		EQU	8
FC_VIOREADCHARSTR	EQU	9
FC_VIOREADCELLSTR	EQU	10
FC_VIOWRTNCHAR		EQU	11
FC_VIOWRTNATTR		EQU	12
FC_VIOWRTNCELL		EQU	13
FC_VIOWRTCHARSTR	EQU	14
FC_VIOWRTCHARSTRATT	EQU	15
FC_VIOWRTCELLSTR	EQU	16
FC_VIOWRTTTY		EQU	17
FC_VIOSCROLLUP		EQU	18
FC_VIOSCROLLDN		EQU	19
FC_VIOSCROLLLF		EQU	20
FC_VIOSCROLLRT		EQU	21
FC_VIOSETANSI		EQU	22
FC_VIOGETANSI		EQU	23
FC_VIOPRTSC		EQU	24
FC_VIOSCRLOCK		EQU	25
FC_VIOSCRUNLOCK		EQU	26
FC_VIOSAVREDRAWWAIT	EQU	27
FC_VIOSAVREDRAWUNDO	EQU	28
FC_VIOPOPUP		EQU	29
FC_VIOENDPOPUP		EQU	30
FC_VIOPRTSCTOGGLE	EQU	31
FC_VIOMODEWAIT		EQU	32
FC_VIOMODEUNDO		EQU	33
FC_VIOGETFONT		EQU	34
FC_VIOGETCONFIG		EQU	35
FC_VIOSETCP		EQU	36
FC_VIOGETCP		EQU	37
FC_VIOSETFONT		EQU	38
FC_VIOGETSTATE		EQU	39
FC_VIOSETSTATE		EQU	40

VIOCONFIGINFO STRUC
VIOIN_CB            DW  ? ;LENGTH OF THIS DATA STRUCTURE
VIOIN_ADAPTER       DW  ? ;DISPLAY ADAPTER TYPE
VIOIN_DISPLAY       DW  ? ;DISPLAY/MONITOR TYPE
VIOIN_CBMEMORY      DD  ? ;AMOUNT OF MEMORY ON THE ADAPTER IN BYTES
VIOIN_CONFIGURATION DW  ? ;
VIOIN_VDHVERSION    DW  ? ;
VIOIN_FLAGS         DW  ? ;
VIOIN_HWBUFFERSIZE  DD  ? ;
VIOIN_FULLSAVESIZE  DD  ? ;
VIOIN_PARTSAVESIZE  DD  ? ;
VIOIN_EMADAPTERSOFF DW  ? ;OFFSET TO EMULATED ADAPTER TYPES
VIOIN_EMDISPLAYSOFF DW  ? ;OFFSET TO EMULATED DISPLAY TYPES
VIOCONFIGINFO ENDS

VIOMODEINFO STRUC
VIOMI_CB             DW ? ;LENGTH OF THE ENTIRE DATA STRUCTURE
VIOMI_FBTYPE         DB ? ;BIT MASK OF MODE BEING SET
VIOMI_COLOR          DB ? ;NUMBER OF COLORS (POWER OF 2)
VIOMI_COL            DW ? ;NUMBER OF TEXT COLUMNS
VIOMI_ROW            DW ? ;NUMBER OF TEXT ROWS
VIOMI_HRES           DW ? ;HORIZONTAL RESOLUTION
VIOMI_VRES           DW ? ;VERTICAL RESOLUTION
VIOMI_FMT_ID         DB ? ;ATTRIBUTE FORMAT
VIOMI_ATTRIB         DB ? ;NUMBER OF ATTRIBUTES
VIOMI_BUF_ADDR       DD ? ;
VIOMI_BUF_LENGTH     DD ? ;
VIOMI_FULL_LENGTH    DD ? ;
VIOMI_PARTIAL_LENGTH DD ? ;
VIOMI_EXT_DATA_ADDR  DD ? ;
VIOMODEINFO ENDS

VIOCURSORINFO STRUC
VIOCI_YSTART DW  ? ;CURSOR START LINE
VIOCI_CEND   DW  ? ;CURSOR END LINE
VIOCI_CX     DW  ? ;CURSOR WIDTH
VIOCI_ATTR   DW  ? ;-1=HIDDEN CURSOR, ANY OTHER=NORMAL CURSOR
VIOCURSORINFO ENDS

VIOFONTINFO struc
  viofi_cb      dw  ? ;length of this structure
  viofi_type    dw  ? ;request type
  viofi_cxCell  dw  ? ;pel columns in character cell
  viofi_cyCell  dw  ? ;pel rows in character cell
  viofi_pbData  dd  ? ;requested font table (returned)
  viofi_cbData  dw  ? ;length of caller supplied data area (in bytes)
VIOFONTINFO ends

VIOPALSTATE struc
  viopal_cb               dw ? ;Length of this structure in bytes
  viopal_type             dw ? ;Request type=0 get palette registers
  viopal_iFirst           dw ? ;First palette register to return
  viopal_acolor  dw 1  dup (?) ;Color value palette register
VIOPALSTATE ends

VIOOVERSCAN struc
  vioos_cb                dw ? ;Length of this structure
  vioos_type              dw ? ;Request type=1 get overscan (border) color
  vioos_color             dw ? ;Color value
VIOOVERSCAN ends

VIOINTENSITY struc
  vioint_cb               dw ? ;Length of this structure
  vioint_type             dw ? ;Request type=2 get blink/background
                              ; intensity switch
  vioint_fs               dw ? ;Value of blink/background switch
VIOINTENSITY ends

VIOCOLORREG struc
  viocreg_cb              dw ? ;
  viocreg_type            dw ? ;
  viocreg_firstcolorreg   dw ? ;
  viocreg_numcolorregs    dw ? ;
  viocreg_colorregaddr    dd ? ;
VIOCOLORREG ends

VIOSETULINELOC struc
  viouline_cb             dw ? ;
  viouline_type           dw ? ;
  viouline_scanline       dw ? ;
VIOSETULINELOC ends

VIOSETTARGET struc
  viosett_cb               dw ? ;
  viosett_type             dw ? ;
  viosett_defaultalgorithm dw ? ;
VIOSETTARGET    ends

@VioWrtTTY	MACRO	STRING, LENGTH, HANDLE
		@DEFINE	VIOWRTTTY
		@PUSHS	STRING
		@PUSHW	LENGTH
		@PUSHW	HANDLE
		CALL	FAR PTR VIOWRTTTY
		ENDM

ENDIF

IFDEF	INCL_KBD

KR_KBDCHARIN		EQU	00000001H
KR_KBDPEEK		EQU	00000002H
KR_KBDFLUSHBUFFER	EQU	00000004H
KR_KBDGETSTATUS		EQU	00000008H
KR_KBDSETSTATUS		EQU	00000010H
KR_KBDSTRINGIN		EQU	00000020H
KR_KBDOPEN		EQU	00000040H
KR_KBDCLOSE		EQU	00000080H
KR_KBDGETFOCUS		EQU	00000100H
KR_KBDFREEFOCUS		EQU	00000200H
KR_KBDGETCP		EQU	00000400H
KR_KBDSETCP		EQU	00000800H
KR_KBDXLATE		EQU	00001000H
KR_KBDSETCUSTXT		EQU	00002000H
KR_KBDGETHWID		EQU	00004000H

FC_KBDCHARIN		EQU	00H
FC_KBDPEEK		EQU	01H
FC_KBDFLUSHBUFFER	EQU	02H
FC_KBDGETSTATUS		EQU	03H
FC_KBDSETSTATUS		EQU	04H
FC_KBDSTRINGIN		EQU	05H
FC_KBDOPEN		EQU	06H
FC_KBDCLOSE		EQU	07H
FC_KBDGETFOCUS		EQU	08H
FC_KBDFREEFOCUS		EQU	09H
FC_KBDGETCP		EQU	0AH
FC_KBDSETCP		EQU	0BH
FC_KBDXLATE		EQU	0CH
FC_KBDSETCUSTXT		EQU	0DH
FC_KBDGETHWID		EQU	0EH

IO_WAIT		EQU	0
IO_NOWAIT	EQU	1

KBDHWID STRUC
	KBD_CB		DW  ? ;LENGTH IN BYTES OF THIS STRUCTURE
	KBD_ID		DW  ? ;ATTACHED KEYBOARD'S HARDWARE ID (RETURNED)
	RESERVED1	DW  ? ;RESERVED (SET TO ZERO)
	RESERVED2	DW  ? ;RESERVED (SET TO ZERO)
KBDHWID ENDS

KBDKEYINFO STRUC
	KBCI_CHCHAR    DB  ? ;ASCII CHARACTER CODE
	KBCI_CHSCAN    DB  ? ;SCAN CODE
	KBCI_FBSTATUS  DB  ? ;STATE OF THE CHARACTER
	KBCI_BNLSSHIFT DB  ? ;RESERVED (SET TO ZERO)
	KBCI_FSSTATE   DW  ? ;STATE OF THE SHIFT KEYS
	KBCI_TIME      DD  ? ;TIME STAMP OF KEYSTROKE (MS SINCE IPL)
KBDKEYINFO ENDS

KBDINFO STRUC
	KBST_CB           DW  ? ;LENGTH IN BYTES OF THIS STRUCTURE
	KBST_FSMASK       DW  ? ;BIT MASK OF FUNCTIONS TO BE ALTERED
	KBST_CHTURNAROUND DW  ? ;DEFINE TURNAROUND CHARACTER
	KBST_FSINTERIM    DW  ? ;INTERIM CHARACTER FLAGS
	KBST_FSSTATE      DW  ? ;SHIFT STATES
KBDINFO ENDS

@KbdRegister	MACRO	NAME,ENTRY,MASK
		@DEFINE	KBDREGISTER
		@PUSHS	NAME
		@PUSHS	ENTRY
		@PUSHD	MASK
		CALL	FAR PTR KBDREGISTER
		ENDM

@KbdDeRegister	MACRO
		@DEFINE	KBDDEREGISTER
		CALL	FAR PTR KBDDEREGISTER
		ENDM

@KbdCharIn	MACRO	BUFFER,IOWAIT,HANDLE
		@DEFINE	KBDCHARIN
		@PUSHS	BUFFER
		@PUSHW	IOWAIT
		@PUSHW	HANDLE
		CALL	FAR PTR KBDCHARIN
		ENDM

@KbdPeek	MACRO	BUFFER,HANDLE
		@DEFINE	KBDPEEK
		@PUSHS	BUFFER
		@PUSHW	HANDLE
		CALL	FAR PTR KBDPEEK
		ENDM

@KbdStringIn	MACRO	BUFFER,BUFFLNG,IOWAIT,HANDLE
		@DEFINE	KBDSTRINGIN
		@PUSHS	BUFFER
		@PUSHS	BUFFLNG
		@PUSHW	IOWAIT
		@PUSHW	HANDLE
		CALL	FAR PTR KBDSTRINGIN
		ENDM

@KbdFlushBuffer	MACRO	HANDLE
		@DEFINE	KBDFLUSHBUFFER
		@PUSHW	HANDLE
		CALL	FAR PTR KBDFLUSHBUFFER
		ENDM

@KbdSetStatus	MACRO	STRUCTURE,HANDLE
		@DEFINE	KBDSETSTATUS
		@PUSHS	STRUCTURE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDSETSTATUS
		ENDM

@KbdGetStatus	MACRO	STRUCTURE,HANDLE
		@DEFINE	KBDGETSTATUS
		@PUSHS	STRUCTURE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDGETSTATUS
		ENDM

@KbdSetCP	MACRO	RSRVD,CPAGE,HANDLE
		@DEFINE	KBDSETCP
		@PUSHW	RSRVD
		@PUSHW	CPAGE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDSETCP
		ENDM

@KbdGetCP	MACRO	RSRVD,CPAGE,HANDLE
		@DEFINE	KBDGETCP
		@PUSHD	RSRVD
		@PUSHS	CPAGE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDGETCP
		ENDM

@KbdOpen	MACRO	HANDLE
		@DEFINE	KBDOPEN
		@PUSHS	HANDLE
		CALL	FAR PTR KBDOPEN
		ENDM

@KbdClose	MACRO	HANDLE
		@DEFINE	KBDCLOSE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDCLOSE
		ENDM

@KbdGetFocus	MACRO	IOWAIT,HANDLE
		@DEFINE	KBDGETFOCUS
		@PUSHW	IOWAIT
		@PUSHW	HANDLE
		CALL	FAR PTR KBDGETFOCUS
		ENDM

@KbdFreeFocus	MACRO	HANDLE
		@DEFINE	KBDFREEFOCUS
		@PUSHW	HANDLE
		CALL	FAR PTR KBDFREEFOCUS
		ENDM

@KbdSynch	MACRO	IOWAIT
		@DEFINE	KBDSYNCH
		@PUSHW	IOWAIT
		CALL	FAR PTR KBDSYNCH
		ENDM

@KbdSetFgnd	MACRO
		@DEFINE	KBDSETFGND
		CALL	FAR PTR KBDSETFGND
		ENDM

@KbdGetHWID	MACRO	KBDHWID,HKBD
		@DEFINE	KBDGETHWID
		@PUSHS	KBDHWID
		@PUSHW	HKBD
		CALL	FAR PTR KBDGETHWID
		ENDM

@KbdXlate	MACRO	XREC,HANDLE
		@DEFINE	KBDXLATE
		@PUSHS	XREC
		@PUSHW	HANDLE
		CALL	FAR PTR KBDXLATE
		ENDM

@KbdSetCustXt	MACRO	CPAGE,HANDLE
		@DEFINE	KBDSETCUSTXT
		@PUSHS	CPAGE
		@PUSHW	HANDLE
		CALL	FAR PTR KBDSETCUSTXT
		ENDM

ENDIF
